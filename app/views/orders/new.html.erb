<div class="mx-auto max-w-3xl px-4 py-12 sm:px-6 lg:px-8">
  <div class="bg-white shadow-2xl rounded-3xl border border-slate-100 p-8 sm:p-12">
    <h1 class="text-4xl font-display font-bold tracking-tight text-slate-900 mb-10 text-center">Complete Your Purchase</h1>

    <div class="bg-slate-50 px-6 py-8 rounded-2xl mb-12 border border-slate-100">
      <h2 class="text-xl font-display font-bold text-slate-900 mb-4 flex items-center gap-2">
        <svg class="h-5 w-5 text-primary-600" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
        </svg>
        Order Summary
      </h2>
      <div class="space-y-3">
        <div class="flex items-center justify-between text-slate-600">
          <span>Subtotal</span>
          <span class="font-medium text-slate-900"><%= number_to_currency(@cart.line_items.sum { |item| item.product.price * item.quantity }) %></span>
        </div>
        <div class="flex items-center justify-between text-slate-600 pb-4 border-b border-slate-200">
          <span>Shipping</span>
          <span class="text-emerald-600 font-medium">Calculated at next step</span>
        </div>
        <div class="flex items-center justify-between pt-2">
          <span class="text-lg font-display font-bold text-slate-900">Total</span>
          <span class="text-2xl font-display font-bold text-primary-600"><%= number_to_currency(@cart.line_items.sum { |item| item.product.price * item.quantity }) %></span>
        </div>
      </div>
    </div>

    <%= form_with(model: @order, class: "space-y-8") do |form| %>
      <% if @order.errors.any? %>
        <div id="error_explanation" class="bg-rose-50 text-rose-800 px-4 py-3 text-sm font-medium rounded-xl border border-rose-100 lg:mx-0 mx-4">
          <h2 class="font-bold mb-1"><%= pluralize(@order.errors.count, "error") %> prohibited purchase:</h2>
          <ul class="list-disc ml-4 space-y-1">
            <% @order.errors.each do |error| %>
              <li><%= error.full_message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="px-4 lg:px-0">
        <%= form.label :email_address, "Your Email Address", class: "block text-sm font-semibold leading-6 text-slate-900 mb-2" %>
        <%= form.email_field :email_address, required: true, placeholder: "alex@example.com", class: "block w-full rounded-xl border-0 py-4 text-slate-900 shadow-sm ring-1 ring-inset ring-slate-300 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-primary-600 sm:text-sm sm:leading-6 transition-all" %>
        <p class="mt-2 text-xs text-slate-500">We'll use this order detail to send your receipt and tracking info.</p>
      </div>

      <div class="px-4 lg:px-0">
        <%= form.submit "Confirm & Place Order", class: "w-full rounded-full bg-slate-900 px-6 py-4 text-lg font-bold text-white shadow-xl hover:bg-primary-600 transition-all hover:scale-[1.01] active:scale-[0.99] cursor-pointer" %>
        <p class="mt-4 text-center text-sm text-slate-500 flex items-center justify-center gap-1">
          <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.333 9-6.03 9-11.623 0-1.3-.242-2.545-.688-3.692A11.959 11.959 0 0 1 12 2.714Z" />
          </svg>
          Secure Checkout Process
        </p>
      </div>
    <% end %>
  </div>
  
  <div class="mt-8 text-center">
    <%= link_to "Return to Cart", cart_path, class: "text-slate-500 hover:text-slate-900 text-sm font-medium transition-colors" %>
  </div>
</div>
