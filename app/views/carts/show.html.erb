<%= turbo_frame_tag "cart_content" do %>
  <% if @cart.line_items.any? %>
    <div class="flow-root">
      <ul role="list" class="-my-6 divide-y divide-slate-100">
        <% @cart.line_items.each do |item| %>
          <li class="flex py-6">
            <div class="h-24 w-24 flex-shrink-0 overflow-hidden rounded-xl border border-slate-100">
              <% if item.product.image.attached? %>
                <%= image_tag item.product.image, class: "h-full w-full object-cover object-center" %>
              <% else %>
                <div class="h-full w-full bg-slate-50 flex items-center justify-center text-slate-300">
                  <svg class="h-8 w-8" fill="none" viewBox="0 0 24 24" stroke-width="1" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z" />
                  </svg>
                </div>
              <% end %>
            </div>

            <div class="ml-4 flex flex-1 flex-col">
              <div>
                <div class="flex justify-between text-base font-display font-semibold text-slate-900">
                  <h3><%= item.product.name %></h3>
                  <p class="ml-4"><%= number_to_currency(item.product.price * item.quantity) %></p>
                </div>
              </div>
              <div class="flex flex-1 items-end justify-between text-sm">
                <div class="flex items-center gap-2 text-slate-500">
                  <span class="text-xs uppercase tracking-wider font-bold">Qty</span>
                  <span class="font-medium text-slate-900"><%= item.quantity %></span>
                </div>

                <div class="flex">
                  <%= button_to line_item_path(item), method: :delete, class: "font-medium text-red-600 hover:text-red-500 transition-colors text-xs uppercase tracking-widest" do %>
                    Remove
                  <% end %>
                </div>
              </div>
            </div>
          </li>
        <% end %>
      </ul>
    </div>

    <div class="border-t border-slate-100 mt-10 pt-8">
      <div class="flex justify-between text-base font-display font-bold text-slate-900">
        <p>Subtotal</p>
        <p><%= number_to_currency(@cart.line_items.sum { |item| item.product.price * item.quantity }) %></p>
      </div>
      <p class="mt-1 text-xs text-slate-500">Shipping and taxes calculated at checkout.</p>
      <div class="mt-8">
        <%= link_to new_order_path, data: { turbo: false }, class: "flex items-center justify-center rounded-full bg-slate-900 px-6 py-4 text-base font-bold text-white shadow-lg hover:bg-primary-600 transition-all hover:scale-[1.02] active:scale-[0.98]" do %>
          Checkout Now
        <% end %>
      </div>
      <div class="mt-6 flex justify-center text-center text-sm">
        <button type="button" class="font-medium text-slate-500 hover:text-primary-600 transition-colors" data-action="cart-drawer#close">
          Continue Shopping
        </button>
      </div>
    </div>
  <% else %>
    <div class="text-center py-20">
      <div class="inline-flex items-center justify-center h-20 w-20 rounded-full bg-slate-50 mb-6 text-slate-300">
        <svg class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 10.5V6a3.75 3.75 0 10-7.5 0v4.5m11.356-1.993l1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 01-1.12-1.243l1.264-12A1.125 1.125 0 015.513 7.5h12.974c.576 0 1.059.435 1.119 1.007zM8.625 10.5a.375.375 0 11-.75 0 .375.375 0 01.75 0zm7.5 0a.375.375 0 11-.75 0 .375.375 0 01.75 0z" />
        </svg>
      </div>
      <p class="text-slate-500 text-lg font-medium mb-8">Your cart is empty.</p>
      <button type="button" class="rounded-full bg-slate-900 px-8 py-3 text-sm font-bold text-white shadow-sm hover:bg-primary-600 transition-all" data-action="cart-drawer#close">
        Start Shopping
      </button>
    </div>
  <% end %>
<% end %>
